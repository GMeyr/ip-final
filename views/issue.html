<!DOCTYPE html>
<html>
  <head>
   <meta charset="UTF-8">
    <title>Issue Prism</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
      $('#commentButton').click(function(){
          $('.addCommentForm').toggle();
      });
    </script>
  </head>
  
  <body>
    <h1 class="logo">issueprism</h1>
    <div class="navbar">
      <p><a href="/">Home</a> &nbsp; <a href="/addissue">Add Issue</a></p>
    </div>
    <div class="issueContent">
      <div class="issueTypeScope"></div>
      <div class="issueTitle"></div>
      <div class="issueText"></div>
    </div>

    <input type="button" id="commentButton" value="click">

    <div class="addCommentForm">
      <form id="newCommentForm" action="/comment/" method="post">
        <p>Side:<br>
          <input type="radio" name="commside" value="pro" checked>Pro
          <input type="radio" name="commside" value="con">Con
        </p>
        <p>Comment:<br>
          <input type="text" name="commtext" ><br>
          <span class="helpertext">Make sure it's a question</span>
        </p>
        <p>Reference Link:<br>
          <textarea name="commlink" rows="1" cols="30"></textarea>
        </p>
        <p>Comment Type:<br>
          <input type="radio" name="commtype" value="statistical" checked>Statistical
          <input type="radio" name="commtype" value="rational">Rational
          <input type="radio" name="commtype" value="moral">Moral
          <input type="radio" name="commtype" value="anecdotal">Anecdotal
        </p>
        <p><input type="submit" value="Submit Comment" /></p>
      </form>
    </div>

    <script>
        $('.addCommentForm').hide();
        var hiddenID = '<input type="hidden" name="commissue_id" value="' + window.location.query.slice(5); + '" />'
        $('#newCommentForm').append();
    </script>
    <script>
      //self invoking function
      $(function (){
        var pathArray = window.location.search;
        var idPath = "/id/" + pathArray;
        $.ajax({
          type: "GET",
          url: idPath,
          success: function(data) {
            var dataObj = {
                            title: JSON.stringify(data.title).replace(/\"/g, ""),
                            text: JSON.stringify(data.text).replace(/\"/g, ""),
                            type: JSON.stringify(data.type).replace(/\"/g, ""),
                            scope: JSON.stringify(data.scope).replace(/\"/g, "")
                          };
                          
          $('.issueTypeScope').html("<p>" + dataObj.type + " : " + dataObj.scope + "</p>");
          $('.issueTitle').html("<h2>" + dataObj.title + "</h2>");
          $('.issueText').html("<p>" + dataObj.text + "</p>");
          }
        });
      });
    </script>
    
  </body>
</html>
